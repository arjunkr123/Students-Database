<?php/** * The rights of the user is taken into account to set this page * This page needs no service to be generated */ function IS_profile(&$page,$container_id,$id){		require_once("component/data_model/Model.inc");	$rights = array();	$config = null;	$rights["read"] = PNApplication::$instance->user_management->has_right("see_information_session_details",true);	$rights["write"] = PNApplication::$instance->user_management->has_right("edit_information_session",true);	$rights["add"] = PNApplication::$instance->user_management->has_right("manage_information_session",true);	$rights["remove"] = PNApplication::$instance->user_management->has_right("manage_information_session",true);	$config = PNApplication::$instance->selection->get_config();	$calendar_id = PNApplication::$instance->selection->get_calendar_id();		$fct_name = "IS_profile_".$page->generate_id();	$page->onload($fct_name."();");		?>	<script type='text/javascript'>		function <?php echo $fct_name; ?>(){		var config = null;		<?php if($config <> null) echo "config = ".json_encode($config).";";?>		var calendar_id = null;		<?php if($calendar_id <> null) echo "calendar_id = ".json_encode($calendar_id).";";?>		var rights = {};		<?php if(count($rights)>0) echo "rights.read = ".json_encode($rights["read"]).";"; ?>		<?php if(count($rights)>0) echo "rights.write = ".json_encode($rights["write"]).";"; ?>		<?php if(count($rights)>0) echo "rights.add = ".json_encode($rights["add"]).";"; ?>		<?php if(count($rights)>0) echo "rights.remove = ".json_encode($rights["remove"]).";"; ?>		var container = document.getElementById(<?php echo json_encode($container_id); ?>);		var data = null;		<?php if($id != -1)echo "data = ".PNApplication::$instance->selection->get_json_IS_data($id).";";?>		var required = 0;		var id = <?php echo json_encode($id).";"; ?>		require("IS_profile.js",function(){			required = required +1;			everything_ready();		});		everything_ready = function(){			if(required == 1) init();		}				init = function(){			if(id == -1 || id == "-1"){				// This is a creation so check that the current user is allowed to add an IS				if(rights.add) IS_profile(id, config, calendar_id, rights, container, data);				else error_dialog("You are not allowed to create an Information Session");			} else IS_profile(id, config, calendar_id, rights, container, data);		}			}	</script>	<?php}?>