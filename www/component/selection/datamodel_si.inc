<?php 
/* @var $model DataModel */
/* @var $sm SubDataModel */

$sm->addTable("SocialInvestigation")
	->addForeignKey("event", "CalendarEvent", true, true, false, false, true)
	->setPrimary("event")
	->addForeignKey("applicant", "People", true, false, true)
	->addReadAccess("can_access_selection_data",true)
	;
$model->internalGetTable("CalendarEvent")
	->addReadAccessFromForeignTable("SocialInvestigation");

$sm->addTable("SIHouse")
	->addPrimaryKey("id")
	->addForeignKey("applicant","People", true, false, true)
	->addEnum("house_status", array("Owned", "Rented", "Lended"), true, false)
	->addInteger("house_cost", 32, 0, null, true, false)
	->addString("house_comment",200,0,true,false)
	->addEnum("lot_status", array("Owned", "Rented", "Lended"), true, false)
	->addInteger("lot_cost", 32, 0, null, true, false)
	->addString("lot_comment",200,0,true,false)
	->addString("roof_type", 200,0, true, false)
	->addEnum("roof_condition", array("1 (Bad)","2","3","4","5 (Good)"), true, false)
	->addString("roof_comment",200,0,true,false)
	->addString("walls_type", 200,0, true, false)
	->addEnum("walls_condition", array("1 (Bad)","2","3","4","5 (Good)"), true, false)
	->addString("walls_comment",200,0,true,false)
	->addString("floor_type", 200,0, true, false)
	->addEnum("floor_condition", array("1 (Bad)","2","3","4","5 (Good)"), true, false)
	->addString("floor_comment",200,0,true,false)
	->addString("general_comment",500,0,true,false)
	->addReadAccess("can_access_selection_data",true)
	->addWriteAccess("edit_social_investigation", true)
	->addInsertAccess("edit_social_investigation", true)
	->addRemoveAccess("edit_social_investigation", true)
	;
	
$sm->addTable("SIFarm")
	->addForeignKey("applicant", "People", true, false, false, false, true)
	->setPrimary("applicant")
	->addDecimal("land_size",10,2,0,null,true,false)
	->addEnum("land_status", array("Owned", "Rented", "Lended"), true, false)
	->addInteger("land_cost", 32, 0, null, true, false)
	->addString("land_comment",200,0,true,false)
	->addDecimal("income",10,2,0,null,true,false)
	->addString("income_freq",25,0,true,false)
	->addString("comment",500,0,true,false)
	->addReadAccess("can_access_selection_data",true)
	->addWriteAccess("edit_social_investigation", true)
	->addInsertAccess("edit_social_investigation", true)
	->addRemoveAccess("edit_social_investigation", true)
	;

$sm->addTable("SIFarmProduction")
	->addPrimaryKey("id")
	->addForeignKey("applicant", "People", true, false, true, false, false)
	->addEnum("type",array("Animal","Plant"),false,false)
	->addString("name",50,1,false,false)
	->addInteger("nb",32,1,null,false,false)
	->addDecimal("income",10,2,0,null,true,false)
	->addString("income_freq",25,0,true,false)
	->addString("comment",200,0,true,false)
	->addReadAccess("can_access_selection_data",true)
	->addWriteAccess("edit_social_investigation", true)
	->addInsertAccess("edit_social_investigation", true)
	->addRemoveAccess("edit_social_investigation", true)
	;

$sm->addTable("SIFishing")
	->addForeignKey("applicant", "People", true, false, false, false, true)
	->setPrimary("applicant")
	->addString("boat",250,0,true,false)
	->addString("net",250,0,true,false)
	->addDecimal("income",10,2,0,null,true,false)
	->addString("income_freq",25,0,true,false)
	->addString("other",500,0,true,false)
	->addReadAccess("can_access_selection_data",true)
	->addWriteAccess("edit_social_investigation", true)
	->addInsertAccess("edit_social_investigation", true)
	->addRemoveAccess("edit_social_investigation", true)
	;

$sm->addTable("SIPicture")
	->addForeignKey("picture", "Storage", true, false, false, false, true)
	->addForeignKey("applicant", "People", true, false, true, false, false)
	->setPrimary("picture")
	->addReadAccess("can_access_selection_data",true)
	->addWriteAccess("edit_social_investigation", true)
	->addInsertAccess("edit_social_investigation", true)
	->addRemoveAccess("edit_social_investigation", true)
	;

$sm->addTable("SIBelonging")
	->addPrimaryKey("id")
	->addForeignKey("applicant", "People", true, false, true, false, false)
	->addString("description", 500, 1, false, false)
	->addReadAccess("can_access_selection_data",true)
	->addWriteAccess("edit_social_investigation", true)
	->addInsertAccess("edit_social_investigation", true)
	->addRemoveAccess("edit_social_investigation", true)
	;
?>