<?phpclass service_get_area_parents_names extends Service{	public function get_required_rights(){return array();}	public function documentation(){}	public function input_documentation(){		echo "<p> country {boolean} if true, the service will return an object including the country_name of the given area</p>";		echo "<p> area_id the area_id managed by the service</p>";	}	public function output_documentation(){		echo "<p>If(!country), return an array containing all the parents name of the given area</br> For instance ['Talamban','Cebu City','Cebu']</p>";		echo "<p>If(country), return an object, with two attributes<br/><ul><li>country_name: the string that contains the country_name</li><li>area_parents_names: the same array as the one returned in the case (!country)</li></ul></p>";	}	public function execute(&$component, $input){		if(isset($input['area_id'])){			$q = SQLQuery::create()->select("GeographicArea")								->field("parent")								->field("name")								->where("id = '".$input['area_id']."'");			$areas = $q->execute();						if(isset($input['country']) && $input['country'] == true){				$q_country = SQLQuery::create()->select("Country")								->field("name")								->join("Country","CountryDivision",array("id"=>"country"))								->join("CountryDivision","GeographicArea",array("id"=>"country_division"))								->where("GeographicArea.id = '".$input['area_id']."'");				$country = $q_country->execute();												if(!isset($areas[0]['name'])){					echo "[]";				} else {					if(isset($country[0]["name"])){						echo "{country_name: ".json_encode($country[0]["name"]);						echo ", area_parents_names:";					}					echo "['".$areas[0]['name']."'";					$parent = $areas[0]['parent'];					while($parent <> null){						$q = SQLQuery::create()->select("GeographicArea")										->field("parent")										->field("name")										->where("id = '".$parent."'");						$areas = $q->execute();						echo ", '".$areas[0]['name']."'";						$parent = $areas[0]["parent"];					}					echo "]";					if(isset($country[0]["name"])) echo "}";				}			} else {				if(!isset($areas[0]['name'])){					echo "[]";				} else {					echo "['".$areas[0]['name']."'";					$parent = $areas[0]['parent'];					while($parent <> null){						$q = SQLQuery::create()->select("GeographicArea")										->field("parent")										->field("name")										->where("id = '".$parent."'");						$areas = $q->execute();						echo ", '".$areas[0]['name']."'";						$parent = $areas[0]["parent"];					}					echo "]";				}			}		}		else echo "[]";	}}