<?php
/* @var $model DataModel */
$model->addTable("StudentBatch")
	->addPrimaryKey("id")
	->addString("name", 100, 1, false, true)
	->addDate("start_date", true, false)
	->addDate("end_date", true, false)
	->addDisplayableData("name", "Student", "Batch")
	->addDisplayableData("start_date", "Student", "Integration Date")
	->addDisplayableData("end_date", "Student", "Graduation Date")
	->restrictReadAccess("consult_students_list", true)
	->restrictWriteAccess("manage_batches", true)
	->restrictAddAccess("manage_batches", true)
	->restrictRemoveAccess("manage_batches", true)
	;
$model->addTable("Specialization")
	->addPrimaryKey("id")
	->addString("name", 100, 1, false, true)
	->addDisplayableData("name", "Student", "Specialization")
	->restrictReadAccess("consult_students_list", true)
	->restrictWriteAccess("manage_batches", true)
	->restrictAddAccess("manage_batches", true)
	->restrictRemoveAccess("manage_batches", true)
	;
$model->addTable("Student")
	->addForeignKey("batch", "StudentBatch", true, false, true)
	->addForeignKey("people", "People", true, true, false)
	->addString("exclusion_reason", 5000, 0, true, false)
	->addDate("exclusion_date", true, false)
	->addForeignKey("specialization", "Specialization", false, false, true)
	->restrictReadAccess("consult_students_list", true)
	->restrictWriteAccess("manage_batches", true)
	->restrictAddAccess("manage_batches", true)
	->restrictRemoveAccess("manage_batches", true)
	;
$model->addTable("AcademicPeriod")
	->addPrimaryKey("id")
	->addForeignKey("batch", "StudentBatch", true, false, true)
	->addString("name", 100, 1, false, false)
	->addDate("start_date", true, false)
	->addDate("end_date", true, false)
	->addDisplayableData("name", "Academic", "Period")
	->addDisplayableData("start_date", "Academic", "Start")
	->addDisplayableData("end_date", "Academic", "End")
	->restrictReadAccess("consult_students_list", true)
	->restrictWriteAccess("manage_batches", true)
	->restrictAddAccess("manage_batches", true)
	->restrictRemoveAccess("manage_batches", true)
	;
$model->addTable("AcademicClass")
	->addPrimaryKey("id")
	->addForeignKey("period", "AcademicPeriod", true, false, true)
	->addForeignKey("specialization", "Specialization", false, false, true)
	->addString("name", 100, 1, false, false)
	->restrictReadAccess("consult_students_list", true)
	->restrictWriteAccess("manage_batches", true)
	->restrictAddAccess("manage_batches", true)
	->restrictRemoveAccess("manage_batches", true)
	;
$model->addTable("StudentClass")
	->addForeignKey("people", "People", true, false, true)
	->addForeignKey("class", "AcademicClass", true, false, true)
	->addForeignKey("period", "AcademicPeriod", true, false, true)
	->restrictReadAccess("consult_students_list", true)
	->restrictWriteAccess("manage_batches", true)
	->restrictAddAccess("manage_batches", true)
	->restrictRemoveAccess("manage_batches", true)
	;
?>